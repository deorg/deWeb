<app-navbar></app-navbar>
<app-sidebar></app-sidebar>
<main class="app-content">
  <div class="app-title">
    <div>
      <h1><i class="fa fa fa-users"></i> Monthly Meeting</h1>
      <p>Monthly Meeting</p>
    </div>
    <div class="row">
      <div class="form-group">
        <label class="control-label">ข้อมูล</label>
        <div class="form-group">
          <!-- <label class="sr-only" for="exampleInputAmount">ข้อมูล</label> -->
          <div class="input-group">
            <div class="input-group-prepend"><button id="previous" class="input-group-text" disabled (click)="previous(txtMonth)">ก่อนหน้า</button></div>
            <input class="form-control" #txtMonth id="txtMonth" type="text">
            <div class="input-group-append"><button id="next" class="input-group-text" disabled (click)="next(txtMonth)">ถัดไป</button></div>
          </div>
        </div>
      </div>
      <!-- <div class="col-md-4 col-sm-3">
        <input class="form-control" id="startDate" #startDate type="text" placeholder="จาก">
      </div>
      <div class="col-md-1 col-sm-1">

      </div>
      <div class="col-md-4 col-sm-3">
        <input class="form-control" id="endDate" #endDate type="text" placeholder="ถึง">
      </div>
      <div class="col-md-3 col-sm-2">
        <button class="btn btn-primary" type="button" (click)="getData()"><i class="fa fa-fw fa-lg fa-check-circle"></i>ตกลง</button>
      </div> -->
    </div>
    <!-- <ul class="app-breadcrumb breadcrumb">
      <li class="breadcrumb-item"><i class="fa fa-home fa-lg"></i></li>
      <li class="breadcrumb-item"><a href="#">Monthly Meeting</a></li>
    </ul> -->
  </div>
  <div class="row">
    <div class="col-md-12">
      <div class="tile">
        <h3 style="text-align: center">รายงานยอดขายสินค้า ยอดการเก็บเงิน และยอดหนี้ PDO</h3>
        <h3 style="text-align:center">ประจำเดือน{{month}} {{year}}</h3><br><br>
        <h5 class="tile-title" id="first-title">ยอดขาย และยอดเก็บเงิน สาขา
          <!--<select class="form-control" #selectBrh id="exampleSelect1"
            (change)="onChange($event.target.value)">
            <option *ngFor="let branch of branches">{{branch.BRH_ID}}</option>
          </select> โดยคุณ {{mgrsName}} -->
          <div class="input-group">
            <span class="input-group-btn">
              <button type="button" id="decrease" disabled class="btn btn-danger btn-number" data-type="minus"
                data-field="quant[2]" (click)="decrease(branchId)">
                <i class="fa fa-arrow-circle-left" style="margin-top:-15px;"></i>
              </button>
            </span>
            <input type="text" id="branchId" #branchId class="form-control input-number" onfocus="this.select();"
              (change)="selectBranch(branchId)">
            <span class="input-group-btn">
              <button type="button" id="increase" disabled class="btn btn-success btn-number" data-type="plus"
                data-field="quant[2]" (click)="increase(branchId)">
                <i class="fa fa-arrow-circle-right" style="margin-top:-15px;"></i>
              </button>
            </span>
          </div> โดยคุณ {{mgrsName}}
        </h5>

        <div class="table-responsive">
          <table class="table table-bordered">
            <thead>
              <tr class='table-success'>
                <th style='border:none;background-color:white;'></th>
                <th style='border:none;background-color:white;'></th>
                <th style='border:none;background-color:white;'></th>
                <th style='border:none;background-color:white;'></th>
                <th style='border:none;background-color:white;'></th>
                <th style='border:none;background-color:white;'></th>
                <th>หน่วย : ล้าน</th>
              </tr>
              <tr class='table-success'>
                <th>เป้าหมายยอดขายเฉลี่ยต่อเดือน</th>
                <th>ยอดขายเดือนนี้ที่ทำได้</th>
                <th>ผลสรุป<br>+เกินเป้า/-ขาดเป้า</th>
                <th>ยอดเก็บเงินประจำเดือนนี้</th>
                <th>เป้าหมายยอดขายสะสม ณ ปัจจุบัน</th>
                <th>ยอดขายสะสมที่ทำได้ ณ ปัจจุบัน</th>
                <th>ผลสรุป<br>+เกินเป้า/-ขาดเป้า</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>{{tarAmt}}</td>
                <td>{{saleAmt}}</td>
                <td class='text-success' *ngIf="numDiffTarAmt>0">+{{diffTarAmt}}</td>
                <td class='text-danger' *ngIf="numDiffTarAmt<0">{{diffTarAmt}}</td>
                <!-- <ng-template #minus>
                  <td class='text-danger'>{{diffTarAmt}}</td>
                </ng-template> -->
                <td>{{payAmt}}</td>
                <td>{{accTarAmt}}</td>
                <td>{{accSaleAmt}}</td>
                <td class='text-success' *ngIf="numSummary>0">+{{summary}}</td>
                <td class='text-danger' *ngIf="numSummary<0">{{summary}}</td>
                <!-- <ng-template #minusSum>
                  <td class='text-danger'>{{summary}}</td>
                </ng-template> -->
              </tr>
            </tbody>
          </table>
        </div>
        <br>
        <h5 class="tile-title">รายงานยอดหนี้พ้นกำหนดชำระ (Past Due of Obligation)</h5>
        <div class="table-responsive">
          <table class="table table-bordered">
            <tr class='table-warning'>
              <td colspan="4">เกิดขึ้นในเดือนนี้</td>
              <td rowspan="3">ยอดหนี้ PDO สะสมถึงปัจจุบันคิดเป็น % ต่อยอดลูกหนี้การค้า</td>
            </tr>
            <tr class='table-warning'>
              <td rowspan="2">ยอดหนี้ PDO<br>+เพิ่ม/-ลด</td>
              <td colspan="2">ลูกค้าเข้าระบบ 60 วัน</td>
              <td rowspan="2">ยอดหนี้ PDO ถึงปัจจุบัน</td>
            </tr>
            <tr class='table-warning'>
              <td>ลูกค้าใหม่</td>
              <td>ลูกค้าเก่า</td>
            </tr>
            <tr>
              <td>{{losPdoAmt}}</td>
              <td>{{nCustPDOAMT}}</td>
              <td>{{oCustPDOAMT}}</td>
              <td>{{pdoAmt}}</td>
              <td>{{pdoAmtPercent}}%</td>
            </tr>
          </table>
        </div>
      </div>
      <div class="tile">
        <h2 class="tile-title" style="text-align:center">รายละเอียดยอดขายสาขา {{currentBranch}}</h2>
        <div class="row">
          <div class="col-lg-6 col-md-12 col-sm-12">
            <div class="bs-component" style="margin-bottom: 10px;display:grid;">
              <label class="control-label">เรียงตาม</label>
              <div id="sortOption" class="btn-group btn-group-toggle" data-toggle="buttons">
                <label class="btn btn-secondary" *ngFor="let data of sort" (click)="sortBy(data)">
                  <input type="radio" name="options" autocomplete="off">{{data}}
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-6 col-md-12 col-sm-12">
            <div class="bs-component" style="margin-bottom: 10px;display:grid;">
              <label class="control-label">สายบริการ</label>
              <div class="btn-group btn-group-toggle" data-toggle="buttons">
                <label *ngFor="let path of allData" class="btn btn-primary active" id="selectBranch" #selectBranch
                  (click)="onChange($event, selectBranch)">
                  <input type="checkbox" autocomplete="off" checked>{{path.PATH_NO}}</label>
              </div>
            </div>
          </div>
        </div>
        <div class="row" style="padding-top:10px;">
          <div class="embed-responsive embed-responsive-16by9">
            <canvas class="embed-responsive-item" id="barChart"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>